<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="BackMapper">
  
<!--   후원하기 -->
  <insert id="back">
  	INSERT INTO BACKER(
  		NO
  		, PROJECT_NO
  		, MEMBER_NO
  		, REWARD_NO
  		, BACKING_DATE
  	) VALUES(
  		SEQ_BACKER_NO.NEXTVAL
  		, #{projectNo}
  		, #{memberNo}
  		, #{rewardNo}
  		, SYSDATE)
  </insert>
  
<!--   후원완료 -->
  <select id="cntBacker" resultType="java.lang.String">
  	SELECT
	    COUNT(*)
	FROM BACKER
	WHERE PROJECT_NO = #{projectNo}
  </select>
  
<!--   후원취소 -->
  <update id="cancel">
  	UPDATE BACKER
    	SET RETRACT_YN='Y'
	WHERE NO = #{backNo}
  </update>
  
</mapper>